# AWSAWS - ECSWebApplication ハンズオンメモ

- ハンズオン URL：
  [ECSWebApplication ハンズオン](https://dcj71ciaiav4i.cloudfront.net/D74429F0-9E6B-11EB-A4F6-B1481EECB1E4/)

- 今回作成した環境
  ![今回作成した環境](https://dcj71ciaiav4i.cloudfront.net/D74429F0-9E6B-11EB-A4F6-B1481EECB1E4/images/step4_1.png)

## 学習の流れ

以下の 1 から 3 は、以前学習した「Amazon ECS 入門ハンズオン」
[(前回の学習メモ)](https://github.com/kashiwagi11/AWSLearning/tree/main/AmazonECS%E5%85%A5%E9%96%80%E3%83%8F%E3%83%B3%E3%82%BA%E3%82%AA%E3%83%B3)
とほぼ同じ内容だったので、復習の意味合いでやってみた。  
今回メインで学習したのは、「4.Fargate ハンズオン」の部分。

1. 環境構築
2. Docker ハンズオン
3. ECS ハンズオン
4. <font color="Salmon ">**Fargate ハンズオン**</font> ← 今回はここに重点を置き学習した

## 1. 環境構築<br>2. Docker ハンズオン<br>3. ECS ハンズオン

前回のメモに残しているが、

- Cloud9 でクラウド開発環境の準備
- VPC の作成
- Cloud9 環境の docker でコンテナ作成
- 作成したコンテナを実行するための環境作成
  - ECR にコンテナを格納
  - ECR に格納したコンテナを実行する ECS を作成  
    ⇒ ここで作成した ECS は EC2 上でコンテナ動作させる設定となっている

このような流れで、コンテナ作成から EC2 上でコンテナ実行まで体験できる内容となっていた。  
こちらのハンズオンの方が古いためか、一部旧画面（新しいエクスペリエンスを ON にしていない）での説明になっていた。

## 4.Fargate ハンズオン

Fargate は、「コンテナが稼働する場所」を意味しており、「コンテナ自体を管理する機能」である ECS と合わせて使用する。

| AWS でコンテナ使用するには | 「コンテナ自体を管理する機能」+「コンテナが稼働する場所」 |
| -------------------------- | --------------------------------------------------------- |
| 1~3 までの流れでは         | ECS + EC2                                                 |
| 4 では                     | ECS + Fargate                                             |

Fargate を使うには、ECS でクラスターを作成するときに EC2 ではなく Fargate を指定する。
タスク定義とサービスも Fargate 用のものを作成する。

細かい設定の違いはあるが、ほとんど EC2 の時と同じように作成できた。
ECS の作成時に EC2 ではなく、Fargate を指定するだけの違いだった。

> - Fargate を使用するメリット
>
>   - サーバーレスのため VM の運用が必要ない（OS やミドルウェア更新は自動で行われる）
>   - オートスケーリング機能により、負荷に応じて自動でタスク数を調整してくれるので、安定した運用が可能

> - Fargate を使用するデメリット
>
>   - EC2 で運用するよりコストがかかる(時間単位の従量課金)
